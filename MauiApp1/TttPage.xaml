<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MauiApp1.TttPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Trips Traps Trull"
    BackgroundImageSource="dimonback.png">

    <!-- ===== РЕСУРСЫ СТРАНИЦЫ: цвета и стили ===== -->
    <ContentPage.Resources>
        <ResourceDictionary>

            <!-- Палитра -->
            <Color x:Key="ClrPrimary">#4B3FA3</Color>
            <!-- основной фиолетовый -->
            <Color x:Key="ClrPrimaryPressed">#3C3187</Color>
            <!-- тёмный при нажатии -->
            <Color x:Key="ClrOnPrimary">#FFFFFF</Color>
            <!-- текст на кнопках -->
            <Color x:Key="ClrTitle">#FFFFFF</Color>
            <!-- цвет заголовка -->

            <!-- Общий стиль для всех кнопок -->
            <Style TargetType="Button">
                <Setter Property="BackgroundColor" Value="{StaticResource ClrPrimary}" />
                <Setter Property="TextColor" Value="{StaticResource ClrOnPrimary}" />
                <Setter Property="FontFamily" Value="verdana" />
                <Setter Property="CornerRadius" Value="14" />
                <Setter Property="Padding" Value="14,10" />
                <Setter Property="Shadow">
                    <Setter.Value>
                        <Shadow Brush="#40000000" Offset="0,2" Radius="8" />
                    </Setter.Value>
                </Setter>

                <!-- Управление состояниями кнопки -->
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">

                            <!-- Нормальное состояние -->
                            <VisualState x:Name="Normal" />

                            <!-- При нажатии -->
                            <VisualState x:Name="Pressed">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="{StaticResource ClrPrimaryPressed}" />
                                </VisualState.Setters>
                            </VisualState>

                            <!-- Заблокированная кнопка -->
                            <VisualState x:Name="Disabled">
                                <VisualState.Setters>
                                    <Setter Property="BackgroundColor" Value="#663C3187" />
                                    <Setter Property="TextColor" Value="#AAFFFFFF" />
                                </VisualState.Setters>
                            </VisualState>

                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>

        </ResourceDictionary>
    </ContentPage.Resources>


    <!-- ===== ОСНОВНОЙ LAYOUT ===== -->
    <Grid>

        <!-- 1. Фон: берётся из BackgroundImageSource -->

        <!-- 2. Затемняющий градиент сверху, чтобы текст не терялся -->
        <BoxView>
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#55000000" Offset="0.0" />
                    <GradientStop Color="#00000000" Offset="0.35" />
                    <GradientStop Color="#11000000" Offset="1.0" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>

        <!-- 3. Контент поверх -->
        <ScrollView>
            <VerticalStackLayout Padding="24" Spacing="18">

                <!-- Заголовок -->
                <Label Text="Катка с Димоном"
                       FontSize="30"
                       FontAttributes="Bold"
                       FontFamily="verdana"
                       TextColor="{StaticResource ClrTitle}"
                       HorizontalOptions="Center">
                    <Label.Shadow>
                        <Shadow Brush="#66000000" Offset="0,2" Radius="6" />
                    </Label.Shadow>
                </Label>

                <!-- Игровое поле -->
                <Grid x:Name="BoardGrid"
                      WidthRequest="350" HeightRequest="350"
                      RowSpacing="6" ColumnSpacing="6"
                      HorizontalOptions="Center" />

                <!-- Кнопки управления -->
                <Grid x:Name="ControlsGrid"
                      ColumnDefinitions="*,*"
                      RowDefinitions="Auto,Auto,Auto"
                      ColumnSpacing="12" RowSpacing="12"
                      Margin="0,8,0,0">

                    <Button Grid.Row="0" Grid.Column="0"
                            Text="Начать бойню"
                            Clicked="NewGameClicked"/>

                    <Button Grid.Row="0" Grid.Column="1"
                            Text="Кто первый?"
                            Clicked="WhoStartsClicked"/>

                    <Button Grid.Row="1" Grid.Column="0"
                            Text="Тапки"
                            Clicked="ChooseStickerClicked"/>

                    <Button Grid.Row="1" Grid.Column="1"
                            Text="Размер поля"
                            Clicked="ChangeSizeClicked"/>

                    <Button x:Name="BotButton"
                            Grid.Row="2" Grid.Column="0"
                            Grid.ColumnSpan="2"
                            Clicked="ToggleBotClicked"/>
                </Grid>

            </VerticalStackLayout>
        </ScrollView>

    </Grid>
</ContentPage>
